@* Add the route to use hyphenation between words *@
@page "/trusts/academies/pupil-numbers"
@namespace DfE.FIAT.Web.Pages.Trusts.Academies
@model PupilNumbersModel

@{
  Layout = "Academies/_AcademiesLayout";
}

<section class="govuk-!-margin-top-4 govuk-!-margin-bottom-9 app-table-container">
  <table class="govuk-table" data-module="moj-sortable-table" aria-describedby="academies-pupil-numbers-link">
    <thead class="govuk-table__head">
      <tr class="govuk-table__row">
        <th scope="col" class="govuk-body govuk-table__header" aria-sort="ascending">School name</th>
        <th scope="col" class="govuk-body govuk-table__header" aria-sort="none">Phase and age range</th>
        <th scope="col" class="govuk-body govuk-table__header" aria-sort="none">Pupil numbers</th>
        <th scope="col" class="govuk-body govuk-table__header" aria-sort="none">Pupil capacity</th>
        <th scope="col" class="govuk-body govuk-table__header" aria-sort="none"> % full</th>
      </tr>
    </thead>
    <tbody class="govuk-table__body">
      @foreach (var academy in Model.Academies)
      {
        <tr class="govuk-table__row" data-testid="academy-row">
          <th scope="row" class="govuk-body govuk-table__header" data-sort-value="@academy.EstablishmentName" data-testid="school-name">
            @academy.EstablishmentName<br/><span class="govuk-!-font-weight-regular" data-testid="urn">URN: @academy.Urn</span>
          </th>
          <td class="govuk-body govuk-table__cell" data-sort-value="@PupilNumbersModel.PhaseAndAgeRangeSortValue(academy)" data-testid="phase-and-age-range">
            @academy.PhaseOfEducation<br/>
            @academy.AgeRange.Minimum - @academy.AgeRange.Maximum
          </td>

          <td class="govuk-body govuk-table__cell" data-sort-value="@academy.NumberOfPupils" data-testid="pupil-numbers">@academy.NumberOfPupils?.ToString("N0")</td>
          <td class="govuk-body govuk-table__cell" data-sort-value="@academy.SchoolCapacity" data-testid="pupil-capacity">@academy.SchoolCapacity?.ToString("N0")</td>
          <td class="govuk-body govuk-table__cell" data-sort-value="@academy.PercentageFull" data-testid="percentage-full">
            @if (academy.PercentageFull is not null)
            {
              @academy.PercentageFull?.ToString("N0")<span>%</span>
            }
          </td>
        </tr>
      }
    </tbody>
  </table>
</section>
