# 🛡️ Accessibility Testing & Audit Reports

This directory contains accessibility testing reports and audit documentation for the Find Information about Academies and Trusts application.

## 📊 **Three Types of Reports Available**

### 1. **🔍 Standard Violation Reports** (Default)

- **Location**: `/cypress/accessibility/`
- **Generated by**: All accessibility tests (`.cy.ts` files)
- **Content**: Only shows accessibility violations (what needs fixing)
- **When created**: Only when violations are found
- **Use case**: Day-to-day development and CI/CD feedback

**Example structure:**

```text
/cypress/accessibility/
├── Accessibility Report --- trust-overview-accessibility --- should check trust overview page accessibility (2024-01-15T14-30-00-000Z)/
│   ├── Accessibility Report.html
│   └── Accessibility Issues Image.png
```

### 2. **📋 Comprehensive Audit Reports** (Option 1)

- **Location**: `/cypress/accessibility/audit-reports/`
- **Generated by**: `accessibility-audit-report.cy.ts`
- **Content**: Shows ALL accessibility rules (passed ✅, failed ❌, incomplete ⚠️, not applicable ℹ️)
- **When created**: Always generated (for audit trail)
- **Use case**: Compliance audits, comprehensive documentation, stakeholder reports

**Example structure:**

```text
/cypress/accessibility/audit-reports/
├── accessibility-audit-home-page-2024-01-15T14-30-00-000Z.html
├── accessibility-audit-trust-overview-2024-01-15T14-30-00-000Z.html
└── accessibility-audit-search-results-2024-01-15T14-30-00-000Z.html
```

### 3. **🎯 Enhanced Standard Reports** (Option 2)

- **Location**: `/cypress/accessibility/`
- **Generated by**: Modified existing tests with `generateReport: true`
- **Content**: Shows violations + enhanced metadata
- **When created**: Always generated regardless of pass/fail
- **Use case**: Enhanced development feedback with audit trail

## 🚀 **How to Generate Each Type**

### Standard Violation Reports (Default)

These are generated automatically by all accessibility tests when violations are found:

```bash
# Run all accessibility tests
npx cypress run --spec "cypress/e2e/accessibility/**/*.cy.ts"
```

### Comprehensive Audit Reports

Run the dedicated audit report test:

```bash
# Generate comprehensive audit reports for key pages
npx cypress run --spec "cypress/e2e/accessibility/accessibility-audit-report.cy.ts"
```

### Enhanced Standard Reports

Modify any existing test to always generate reports:

```typescript
cy.checkAccessibility('#main-content', {
    includedImpacts: ['critical', 'serious'],
    onlyWarnImpacts: ['moderate', 'minor'],
    generateReport: true  // Always generate, not just on failures
});
```

## 📈 **CI/CD Integration**

The GitHub Actions workflow includes three test groups:

1. **`ui`** - Regular UI tests
2. **`a11y`** - Standard accessibility tests (generates violation reports)
3. **`a11y-audit`** - Comprehensive audit tests (always generates full reports)

### Workflow Configuration

```yaml
strategy:
  matrix:
    include:
      - group: a11y-audit
        browser: "edge"
        spec: cypress/e2e/accessibility/accessibility-audit-report.cy.ts
```

### Artifact Upload

- Standard reports: Uploaded with `if-no-files-found: warn`
- Audit reports: Uploaded with `if-no-files-found: error` (must always generate)

## 🎯 **Best Practices**

### For Development Teams

- Use **standard reports** for day-to-day development
- Fix violations as they appear in CI/CD
- Focus on critical and serious issues first

### For Compliance Teams

- Generate **audit reports** monthly/quarterly
- Use audit reports for stakeholder presentations
- Include audit reports in compliance documentation

### For QA Teams

- Use **enhanced reports** when investigating specific issues
- Generate audit reports before major releases
- Maintain historical audit trail for comparison

## 🔧 **Configuration Options**

### Impact Levels

```typescript
includedImpacts: ['critical', 'serious', 'moderate', 'minor']
onlyWarnImpacts: ['moderate', 'minor']  // Don't fail tests, just warn
```

### Report Generation

```typescript
generateReport: true   // Always generate (audit mode)
generateReport: false  // Only on violations (development mode)
```

### Data Sensitivity

Reports are disabled for sensitive pages:

- Trust contacts (personal data)
- School contacts (personal data)  
- Financial documents (sensitive financial data)

## 📊 **Interpreting Results**

### ✅ **Passed Rules**

Rules that your application successfully follows. These show what's working well.

### ❌ **Failed Rules**

Accessibility violations that need to be fixed. Prioritize by impact level:

1. **Critical** 🔴 - Fix immediately
2. **Serious** 🟠 - Fix in current sprint  
3. **Moderate** 🟡 - Fix in next release
4. **Minor** 🔵 - Fix when convenient

### ⚠️ **Incomplete Rules**

Rules that couldn't be fully evaluated (may need manual testing).

### ℹ️ **Not Applicable Rules**

Rules that don't apply to the current page content.

## 🔗 **Related Documentation**

- [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)
- [axe-core Rules](https://github.com/dequelabs/axe-core/blob/master/doc/rule-descriptions.md)
- [wick-a11y Documentation](https://github.com/sclavijosuero/wick-a11y)
- [Cypress Accessibility Testing](https://docs.cypress.io/guides/accessibility-testing)

---
