@using DfE.FindInformationAcademiesTrusts.Data.Enums
@model FinancialDocumentsAreaModel
@{
  Layout = "_TrustLayout";
}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h2 class="govuk-heading-m" data-testid="subpage-header">
      @Model.TrustPageMetadata.SubPageName
    </h2>
    <p class="govuk-body">You must have permission to view these documents.</p>
    @if (Model.InternalUseOnly)
    {
      <partial name="Shared/_InternalUseOnlyWarning" model="@Model.TrustPageMetadata.SubPageName" />
    }
    <dl class="govuk-summary-list">
      @foreach (var doc in Model.FinancialDocuments)
      {
        <div class="govuk-summary-list__row">
          <dt class="govuk-summary-list__key">
            @doc.YearFrom to @doc.YearTo
          </dt>
          <dd class="govuk-summary-list__value">
            @switch (doc)
            {
              case { Status: FinancialDocumentStatus.Submitted, Link: not null }:
                <a href="@doc.Link" class="govuk-link" rel="noreferrer noopener" target="_blank">
                  View
                  <span class="govuk-visually-hidden">@doc.YearFrom to @doc.YearTo</span>
                  @Model.FinancialDocumentDisplayName (opens in a new tab)
                </a>
                break;
              case { Status: FinancialDocumentStatus.NotYetSubmitted }:
                <strong class="govuk-tag govuk-tag--yellow">Not yet submitted</strong>
                break;
              case { Status: FinancialDocumentStatus.NotSubmitted }:
                <span>Not submitted</span>
                break;
              case { Status: FinancialDocumentStatus.NotExpected }:
                <span>Not expected</span>
                break;
              default:
                <span>There is a problem displaying this document</span>
                break;
            }
          </dd>
        </div>
      }
    </dl>

    @RenderBody()

  </div>
</div>
