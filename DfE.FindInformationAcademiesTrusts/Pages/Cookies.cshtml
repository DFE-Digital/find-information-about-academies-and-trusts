@page
@using DfE.FindInformationAcademiesTrusts.Configuration
@model CookiesModel

@{
  Layout = "_ContentLayout";
  ViewData["Title"] = "Cookies";
}

@if (Model.DisplayCookieChangedMessageOnCookiesPage)
{
  <div class="govuk-notification-banner govuk-notification-banner--success" role="alert" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
    <div class="govuk-notification-banner__header">
      <h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
        Success
      </h2>
    </div>
    <div class="govuk-notification-banner__content">
      <p class="govuk-notification-banner__heading">
        You’ve set your cookie preferences. <a class="govuk-notification-banner__link" href="@Model.ReturnPath" data-testid="return-to-previous-page">Go back to the page you were looking at</a>.
      </p>
    </div>
  </div>
}

<h1 class="govuk-heading-l">Cookie preferences</h1>
<div class="govuk-grid-row">
  <div class="govuk-grid-column-three-quarters">
    <p class="govuk-body">
      Cookies are small files saved on your phone, tablet or computer when you visit a website.
    </p>
    <p class="govuk-body">
      We use cookies to make Find information about schools and trusts work and collect information about how you use our service.
    </p>
    <h2 class="govuk-heading-m">Essential cookies</h2>
    <p class="govuk-body">
      Essential cookies keep your information secure while you use this site. We do not need to ask permission to use them.
    </p>
    <table class="govuk-table" aria-label="Essential cookies">
      <thead class="govuk-table__header">
        <tr>
          <th class="govuk-table__header">Name</th>
          <th class="govuk-table__header">Purpose</th>
          <th class="govuk-table__header">Expires</th>
        </tr>
      </thead>
      <tbody class="govuk-table__body">
        <tr>
          <td class="govuk-table__cell">@FiatCookies.Login</td>
          <td class="govuk-table__cell">Used to keep you signed in</td>
          <td class="govuk-table__cell">With browser settings (Session)</td>
        </tr>
        <tr>
          <td class="govuk-table__cell">@FiatCookies.CookieConsent</td>
          <td class="govuk-table__cell">Stores your consent to optional cookies </td>
          <td class="govuk-table__cell">1 year</td>
        </tr>
        <tr>
          <td class="govuk-table__cell">ASLBSA </td>
          <td class="govuk-table__cell">Used to balance the load on our servers </td>
          <td class="govuk-table__cell">With browser settings (Session)</td>
        </tr>
        <tr>
          <td class="govuk-table__cell">ASLBSACORS </td>
          <td class="govuk-table__cell">Used to balance the load on our servers </td>
          <td class="govuk-table__cell">With browser settings (Session)</td>
        </tr>
        <tr>
          <td class="govuk-table__cell">@FiatCookies.Antiforgery</td>
          <td class="govuk-table__cell">Secures you and our service against Cross Site Scripting Attacks (CSRF) </td>
          <td class="govuk-table__cell">With browser settings (Session)</td>
        </tr>
      </tbody>
    </table>

    <h2 class="govuk-heading-m">Optional analytics cookies</h2>
    <p class="govuk-body">
      With your permission, we use Application Insights and Google Analytics to collect data about how you use this site. This information helps us to improve our service.
    </p>
    <p class="govuk-body">
      Application Insights and Google Analytics are not allowed to use or share our analytics data with anyone. Application Insights and Google Analytics store information about:
    </p>
    <ul class="govuk-list govuk-list--bullet">
      <li>how you got to this site</li>
      <li>the pages you visit on this site and how long you spend on them</li>
      <li>any errors you see while using this site</li>
      <li>what you click on while you are visiting the site</li>
      <li>whether you’ve visited before</li>
      <li>your unique user identity</li>
    </ul>

    <table class="govuk-table" aria-label="Essential cookies">
      <thead class="govuk-table__header">
        <tr>
          <th class="govuk-table__header">Name</th>
          <th class="govuk-table__header">Purpose</th>
          <th class="govuk-table__header">Expires</th>
        </tr>
      </thead>
      <tbody class="govuk-table__body">
        <tr>
          <td class="govuk-table__cell">ai_user</td>
          <td class="govuk-table__cell">Checks if you have visited this site before. This helps us count how many people visit our site.</td>
          <td class="govuk-table__cell">1 year</td>
        </tr>
        <tr>
          <td class="govuk-table__cell">ai_session</td>
          <td class="govuk-table__cell">Checks if you have visited this site before. This helps us count how many people visit our site.</td>
          <td class="govuk-table__cell">30 minutes</td>
        </tr>
        <tr class="govuk-table__row">
          <td class="govuk-table__cell">ai_authUser</td>
          <td class="govuk-table__cell">This helps us to identify authenticated users and how they interact with the site</td>
          <td class="govuk-table__cell">When you close your browser</td>
        </tr>
        <tr>
          <td class="govuk-table__cell">_ga</td>
          <td class="govuk-table__cell">Tracks your activity on the site. This helps us to improve our service.</td>
          <td class="govuk-table__cell">2 years</td>
        </tr>
        <tr>
          <td class="govuk-table__cell">_gid</td>
          <td class="govuk-table__cell">Tracks a number of users. This helps us determine patterns in behaviour.</td>
          <td class="govuk-table__cell">24 hours</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <form method="post" name="frmCookies">
      <div class="govuk-form-group">
        <input type="hidden" name="redirectPath" value="@(HttpContext.Request.Path + HttpContext.Request.QueryString)"/>
        <fieldset class="govuk-fieldset">
          <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
            <h3 class="govuk-fieldset__heading">Do you want to accept cookies that measure your website use?</h3>
          </legend>
          <div class="govuk-radios">
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="cookies-accept" type="radio" name="consent" value="true" checked="@Model.Consent">
              <label class="govuk-label govuk-radios__label" for="cookies-accept">
                Yes
              </label>
            </div>
            <div class="govuk-radios__item">
              <input class="govuk-radios__input" id="cookies-reject" type="radio" name="consent" value="false" checked="@(!Model.Consent)">
              <label class="govuk-label govuk-radios__label" for="cookies-reject">
                No
              </label>
            </div>
          </div>
        </fieldset>
      </div>
      <button type="submit" class="govuk-button" data-module="govuk-button" data-testid="save-cookie-preferences-button">Save changes</button>
    </form>
  </div>
</div>
